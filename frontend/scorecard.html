<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Score Card Form</title>
    <style>
        .logo {
            display: block;
            margin: 0 auto 20px auto;
            width: 300px; /* Adjust the size of the logo */
            height: auto;
        }
      body {
          font-family: Arial, sans-serif;
          background-color: #f2f2f2;
          padding: 20px;
      }

      h1 {
          text-align: center;
          color: #333;
      }

      form {
          max-width: 600px;
          margin: 0 auto;
          background-color: #fff;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
      }

      label {
          font-weight: bold;
      }

      input[type="text"],
      input[type="number"] {
          width: 100%;
          padding: 8px;
          margin-bottom: 10px;
          border: 1px solid #ccc;
          border-radius: 4px;
          box-sizing: border-box;
      }

      input[type="checkbox"] {
          margin-right: 5px;
      }

      input[type="submit"] {
          background-color: #4CAF50;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          float: center;
      }

      input[type="submit"]:hover {
          background-color: #45a049;
      }

      .form-group {
          margin-bottom: 20px;
      }

      .form-group::after {
          content: "";
          display: table;
          clear: both;
      }

      .form-group label {
          float: left;
          width: 50%;
          text-align: right;
          margin-right: 10px;
          line-height: 28px;
      }

      .form-group input {
          float: left;
          width: 50%;
      }
  </style>
</head>
<body>
    <img src="./assets/logo.jpeg" alt="Score Card Form Logo" class="logo">

    <h1>Score Card Form</h1>
    <form id="scoreForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name"><br><br>
        
        <label for="roll">Roll no & year:</label>
        <input type="text" id="roll" name="roll"><br><br>

        <label for="attendance">Attendance percentage:</label>
        <input type="number" id="attendance" name="attendance"><br><br>

        <label for="arrears">No of Arrears:</label>
        <input type="number" id="arrears" name="arrears"><br><br>

        <label for="language">Language Known:</label>
        <input type="text" id="language" name="language"><br><br>

        <label for="skillset">Skill Set (Leetcode / Code Chef / Other):</label><br>
        <input type="checkbox" id="leetcode" name="skillset" value="Leetcode">
        <label for="leetcode"> Leetcode</label><br>
        <input type="text" id="leetcode" name="skillset"><br><br>
        <input type="checkbox" id="codechef" name="skillset" value="Code Chef">
        <label for="codechef"> Code Chef</label><br>
        <input type="text" id="codechef" name="skillset"><br><br>
        <input type="checkbox" id="otherSkill" name="skillset" value="Other">
        <label for="otherSkill"> Other</label><br><br>
        <input type="other" id="leetcode" name="skillset"><br><br>
        <label for="cgpa">CGPA:</label>
        <input type="number" id="cgpa" name="cgpa" step="0.01" min="0" max="10" required><br><br>

        <label for="communication">Communication:</label>
        <input type="number" id="communication" name="communication" min="0" max="10" required><br><br>

        <label for="leadership">Leadership:</label>
        <input type="number" id="leadership" name="leadership" min="0" max="10" required><br><br>

        <label for="criticalThinking">Critical Thinking:</label>
        <input type="number" id="criticalThinking" name="criticalThinking" min="0" max="10" required><br><br>


        <label for="onlineCourses">Expertise in Online Courses (Name and year of completion):</label><br>
        <input type="text" id="onlineCourses" name="onlineCourses"><br><br>

        <label for="coursesPlatforms">Courses Platforms:</label><br>
        <input type="checkbox" id="nptel" name="coursesPlatforms" value="NPTEL">
        <label for="nptel">NPTEL</label><br>
        <input type="checkbox" id="coursera" name="coursesPlatforms" value="Coursera">
        <label for="coursera">Coursera</label><br>
        <input type="checkbox" id="udemy" name="coursesPlatforms" value="Udemy">
        <label for="udemy">Udemy</label><br><br>

        <label for="otherPlatform">Any other platform:</label><br>
        <input type="text" id="otherPlatform" name="otherPlatform"><br><br>

        <label for="projectCompleted">No. of project completed:</label>
        <input type="number" id="projectCompleted" name="projectCompleted"><br><br>

        <label for="projectTitle">Project Title:</label>
        <input type="text" id="projectTitle" name="projectTitle"><br><br>

        <label for="externalParticipation">Active external Participation:</label>
        <input type="text" id="externalParticipation" name="externalParticipation"><br><br>

        <label for="awards">Awards:</label>
        <input type="text" id="awards" name="awards"><br><br>

        <label for="paperPublished">Paper Published in Conference/Journal:</label>
        <input type="text" id="paperPublished" name="paperPublished"><br><br>

        <input type="submit" value="Submit">
    </form>

    <script>
       const form = document.getElementById('scoreForm');
form.addEventListener('submit', async (event) => {
    event.preventDefault();

    const formData = new FormData(form);
    const formDataObject = {
        name: formData.get('name'),
        roll: formData.get('roll'),
        attendance: parseFloat(formData.get('attendance')),
        arrears: parseInt(formData.get('arrears')),
        language: formData.get('language'),
        skillset: [],
        cgpa: parseFloat(formData.get('cgpa')),
        communication: parseInt(formData.get('communication')),
        leadership: parseInt(formData.get('leadership')),
        criticalThinking: parseInt(formData.get('criticalThinking')),
        onlineCourses: formData.get('onlineCourses'),
        coursesPlatforms: [],
        otherPlatform: formData.get('otherPlatform'),
        projectCompleted: parseInt(formData.get('projectCompleted')),
        projectTitle: formData.get('projectTitle'),
        externalParticipation: formData.get('externalParticipation'),
        awards: formData.get('awards'),
        paperPublished: formData.get('paperPublished')
    };

    // Handle checkboxes
    if (formData.get('leetcode')) formDataObject.skillset.push('Leetcode');
    if (formData.get('codechef')) formDataObject.skillset.push('Code Chef');
    if (formData.get('otherSkill')) formDataObject.skillset.push('Other');
     // Handle course platforms checkboxes
     if (formData.get('nptel')) {
                formDataObject.coursesPlatforms.push('NPTEL');
            }
            if (formData.get('coursera')) {
                formDataObject.coursesPlatforms.push('Coursera');
            }
            if (formData.get('udemy')) {
                formDataObject.coursesPlatforms.push('Udemy');
            }

    try {
        const response = await fetch('http://localhost:4000/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formDataObject)
        });

        if (response.ok) {
            alert('Score saved successfully.');
            form.reset();
        } else {
            // Parse the response JSON if there's an error
            const responseData = await response.json();
            alert('Error: ' + (responseData.error || 'Failed to save score.'));
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error: ' + error.message);
    }
});

    </script>
</body>
</html>
